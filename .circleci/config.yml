version: 2.1
orbs:
  release-management: salesforce/npm-release-management@dev:alpha

workflows:
  version: 2
  test-and-release:
    jobs:
      - release-management/test-external-nut:
          sfdx_version: latest
          os: linux
          node_version: lts
          dependency_to_replace: '@salesforce/core'
          external_project_git_url: 'https://github.com/salesforcecli/plugin-user'
      # - - release-management/test-nut:
      #     name: nuts-on-windows
      #     os: windows
      #     requires:
      #       - release-management/test-package
      # - release-management/validate-pr:
      #     filters:
      #       branches:
      #         ignore: main
      # - release-management/test-package:
      #     matrix:
      #       parameters:
      #         os:
      #           - linux
      #         node_version:
      #           - latest
      #           - lts
      #           - maintenance
      # - release-management/release-package:
      #     github-release: true
      #     post-job-steps:
      #       - run: yarn ci-docs
      #     requires:
      #       - release-management/test-package
      #     filters:
      #       branches:
      #         only: main
      #     context: CLI_CTC
